<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Land Lines - Chrome Experiments</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet">
    <style>

    html, body {
        height: 100%;
        margin: 0;
        color: white;
    	background-color: black;
    	font-family: 'Roboto Condensed', sans-serif;
        font-weight: 300;
        overflow: hidden;
    }

    a {
        color: white;
        text-decoration: none;
    }

    #container {
        display: table;
        table-layout: fixed;
        width: 100%;
        height: 100%;
    }

    #header {
        font-size: 24pt;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
        letter-spacing: 2pt;
        vertical-align: middle;
        margin-top: 0;
        margin-bottom: 5px;
    }

    #desc {
        margin-top: 0;
        margin-bottom: 50px;
    }

    #app {
        display: table-cell;
        vertical-align: middle;
        font-size: 12pt;
        letter-spacing: 0.5pt;
        text-align: center;
        background-position: center;
        background-size: cover; 
        background-image: url('img/draw-hero.jpg');
    }

    .app-button {
        border: 1px solid white;
        background-color: rgba(0, 0, 0, 0.25);
        display: block;
        width: 225px;
        height: 30px;
        font-size: 13pt;
        text-align: center;
        vertical-align: middle;
        margin: 0 auto;
        padding-top: 10px;
        margin-bottom: 10px;
    }

    .app-button:last-child {
        margin-bottom: 50px;
    }

    #chrome-experiment {
        color: white;
        position: absolute;
        bottom: 0px;
        left: 0;
    }

    #privacy-terms {
        position: absolute;
        bottom: 0px;
        right: 0px;
        padding: 0 8px 8px 0;
        font-size: 9pt;
        letter-spacing: 1pt;
        text-transform: uppercase;
    }

    #overlay-open, #overlay-close {
        position: absolute;
        top: 10px;
        right: 10px;
        color: white;
    }
    #overlay-close {
        display: none;
    }

    #about-overlay {
        display: none;
        opacity: 0;
        top: 0;
        left: 0;
        background-color: rgba(0, 0, 0, 0.85);
        width: 100%;
        height: 100%;
        position: fixed;
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;
    }

    #about-overlay-content {
        width: 60%;
        margin: 0 auto;
        font-size: 10pt;
        letter-spacing: 0.5pt;
        line-height: 2.3;
    }

    #about-overlay-content p {
        margin: 8px 0;
        font-family: 'Roboto', sans-serif;
    }

    .about-heading {
        font-size: 14pt;
        letter-spacing: 1pt;
        text-transform: uppercase;
        padding-top: 40px;
    }

    .about-heading span {
        padding-bottom: 3px;
        border-bottom: 1px solid white;
    }

    .about-tech {
        font-weight: bold;
        padding-top: 10px;
    }

    #app-container {
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
    }

    /* Changes for mobile */
    @media screen and (max-device-width: 1023px) {
        #desc {
            font-size: 11pt;
        }

        #about-overlay-content {
            width: 80%;
        }
    }

    </style>
</head>

<body>

    <div id="container">

        <div id="app">
            <p id="header">Land Lines</p>
            <p id="desc">Sketch a line, let the planet complete the picture.</p>
            <a class="app-button" href="javascript:void(0)" id="button-draw">Draw</a>
            <a class="app-button" href="javascript:void(0)" id="button-swipe">Swipe</a>
        </div>

    </div>

    <iframe id="app-container"></iframe>

    <div id="privacy-terms">
        <a target="_blank" href="https://www.google.com/policies/privacy/">Privacy</a> &
        <a target="_blank" href="https://www.google.com/policies/terms/">Terms</a>
    </div>

    <a href="javascript:void(0)"><img id="overlay-open" src="img/question-mark@2x.png" width="25"></img></a>
    <img id="chrome-experiment" src="img/CE_badge@2x.png" width="125"></img>

    <div id="about-overlay">
        <div id="about-overlay-content">

            <div class="about-heading"><span>About</span></div>
            <p>Land Lines is an experiment that lets anyone explore incredible satellite images from Google Maps. This project is collaborations between artist Zach Lieberman and some friends from Google. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do elusmod tempor incididunt ut labore et dolore magma aliqua.</p>

            <div class="about-heading"><span>Technology</span></div>
            <p>Land Lines is a a lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do elusmod tempor incididunt ut labore et dolore magma aliqua.</p>

            <div class="about-tech">WebGL</div>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do elusmod tempor incididunt ut labore et dolore magma aliqua.</p>

            <div class="about-tech">App Engine</div>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do elusmod tempor incididunt ut labore et dolore magma aliqua.</p>

            <div class="about-tech">Technology</div>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do elusmod tempor incididunt ut labore et dolore magma aliqua.</p>

            <div class="about-tech">Technology</div>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do elusmod tempor incididunt ut labore et dolore magma aliqua.</p>

        </div>
    </div>
    <a href="javascript:void(0)"><img id="overlay-close" src="img/close@2x.png" width="25"></img></a>

    <script>

    function show(elem) {
        elem.style.opacity = 0;
        elem.style.display = 'block';
        
        var timer = setInterval(function() {
            if (elem.style.opacity >= 1) {
                elem.style.opacity = 1;
                clearInterval(timer);
                return;
            }

            elem.style.opacity = parseFloat(elem.style.opacity) + 0.07;
        }, 1000 / 60);
    }

    function hide(elem) {
        elem.style.opacity = 1;
        elem.style.display = 'block';
        
        var timer = setInterval(function() {
            if (elem.style.opacity <= 0) {
                elem.style.opacity = 0;
                elem.style.display = 'none';
                clearInterval(timer);
                return;
            }

            elem.style.opacity = parseFloat(elem.style.opacity) - 0.07;
        }, 1000 / 60);
    }

    function showAboutOverlay() {
        show(document.getElementById('about-overlay'));
        document.getElementById('overlay-close').style.display = 'block';
    }

    function hideAboutOverlay() {
        hide(document.getElementById('about-overlay'));
        document.getElementById('overlay-close').style.display = 'none';
    }

    function loadApp() {
        show(document.getElementById('app-container'));
        hide(document.getElementById('chrome-experiment'));
        hide(document.getElementById('privacy-terms'));
    }

    function loadAppDraw() {
        loadApp();
        document.getElementById('app-container').src = '/draw';
    }

    function loadAppSwipe() {
        loadApp();
        document.getElementById('app-container').src = '/drag';
    }

    // Layout / background image stuff
    function updateBackgroundMouse(e) {
        var pctW = e.clientX / this.offsetWidth;
        pctW -= 0.5;
        pctW *= 20;

        var pctH = e.clientY / this.offsetHeight;
        pctH -= 0.5;
        pctH *= 20;

        this.style.backgroundPositionX = (50 + pctW) + '%';
        this.style.backgroundPositionY = (50 + pctH) + '%';
    }
     
    function updateBackgroundAccel(e) {
        var elem = document.getElementById('app');
        elem.style.backgroundPositionX = (50 + (e.gamma/1.5)) + '%';
        elem.style.backgroundPositionY = (50 + (e.beta/2)) + '%';
    }

    document.getElementById('overlay-open').onclick = showAboutOverlay;
    document.getElementById('overlay-close').onclick = hideAboutOverlay;

    document.getElementById('button-draw').onclick = loadAppDraw;
    document.getElementById('button-swipe').onclick = loadAppSwipe;

    document.getElementById('app').onmousemove = updateBackgroundMouse;
    window.addEventListener('deviceorientation', updateBackgroundAccel, false);
    </script>
</body>

</html>